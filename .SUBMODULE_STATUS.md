# Sequential Runner - Submodule Status

## Overview

**sequential-runner** is a **Git submodule** that provides deployment-agnostic task execution engine with automatic suspend/resume for infinite-length tasks.

**Status**: External repository (maintained separately)
**Repository**: https://github.com/AnEntrypoint/sequential-runner.git
**Branch**: main
**Integration**: Full monorepo integration via .gitmodules

## Key Facts

1. **Not an empty implementation** - This is a functioning external package
2. **Separate repository** - Maintained at AnEntrypoint/sequential-runner
3. **Monorepo linkage** - Included as git submodule in packages/sequential-runner
4. **Tested & documented** - CLAUDE.md and README.md present with full specifications

## What It Does

- Executes JavaScript task code with automatic suspend/resume
- Integrates with `sequential-adaptor` for storage backends
- Provides `__callHostTool__()` API for external service calls
- Supports infinite-length tasks via HTTP-based stack processing

## Directory Contents

```
packages/sequential-runner/
├── .git                       # Submodule git repository
├── CLAUDE.md                  # Architecture documentation
├── README.md                  # Feature description
├── package.json               # NPM configuration
├── package-lock.json          # Dependency lock
├── bun.lock                   # Bun runtime lock
├── deno.lock                  # Deno runtime lock
├── deno.json                  # Deno configuration
├── tsconfig.json              # TypeScript configuration
├── taskcode/                  # Task implementations
│   ├── vfs.js                # Virtual filesystem
│   ├── host-tools.js         # Tool wrapper definitions
│   ├── publish.ts            # Task publishing utility
│   ├── deno.json             # Deno subproject config
│   ├── deno.lock             # Deno subproject lock
│   └── endpoints/
│       └── comprehensive-gmail-search.js  # Example task
└── types/
    └── supabase.ts           # TypeScript definitions

```

## Installation & Usage

To initialize the submodule:
```bash
git submodule update --init --recursive
cd packages/sequential-runner
npm install
```

To use in code:
```javascript
import { TaskExecutor, StackProcessor } from 'sequential-runner';
import { createAdapter } from 'sequential-adaptor';

const adapter = await createAdapter('folder', { basePath: './tasks' });
const executor = new TaskExecutor(adapter);
const result = await executor.execute(taskRun, taskCode);
```

## Deployment Options

1. **Deno runtime** - Native Deno execution (see deno.json)
2. **Bun runtime** - Bun-compatible (see bun.lock)
3. **Node.js runtime** - NPM execution (see package.json)

Each has independent lock file ensuring deterministic builds.

## Integration with Desktop Server

The desktop-server (`packages/desktop-server`) depends on `sequential-runner` via:
- `packages/sequential-runner/package.json` dependencies
- Task execution routes at `/api/tasks/:taskName/run`
- Task history tracking and run storage

## Notes for Maintainers

- **DO NOT** modify files in this directory directly
- **DO** make changes in the upstream repository at AnEntrypoint/sequential-runner
- **DO** run `git submodule update --remote` to pull latest changes
- **DO** commit submodule pointer updates when upgrading

## See Also

- `packages/sequential-adaptor` - Storage backend interface
- `packages/sequential-fetch` - Implicit xstate VM
- `packages/sequential-flow` - Explicit xstate VM
- `packages/sequential-wrapper` - Service wrapper utilities
